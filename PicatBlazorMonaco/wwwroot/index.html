<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>ProjectionalBlazorMonaco</title>
    <base href="/" />
    <link href="css/bootstrap/bootstrap.min.css" rel="stylesheet" />
    <link href="css/app.css" rel="stylesheet" />
    <link href="ProjectionalBlazorMonaco.styles.css" rel="stylesheet" />
    <link href="_content/BlazorMonaco/lib/monaco-editor/min/vs/editor/editor.main.css" rel="stylesheet" />
</head>

<body>
    <div id="app">Loading...</div>

    <div id="blazor-error-ui">
        An unhandled error has occurred.
        <a href="" class="reload">Reload</a>
        <a class="dismiss">🗙</a>
    </div>
    <script src="_content/BlazorMonaco/lib/monaco-editor/min/vs/loader.js"></script>
    <script>require.config({ paths: { 'vs': '_content/BlazorMonaco/lib/monaco-editor/min/vs' } });</script>
    <script src="_content/BlazorMonaco/lib/monaco-editor/min/vs/editor/editor.main.js"></script>
    <script src="_content/BlazorMonaco/jsInterop.js"></script>
    <script src="_framework/blazor.webassembly.js"></script>
    <script src="_content/BrowserInterop/scripts.js"></script>

    <script>
        function createCssStyle(styleDef) {
            var style = document.createElement('style');
            style.type = 'text/css';
            style.innerHTML = styleDef;
            document.getElementsByTagName('head')[0].appendChild(style);
        }

        function initializeCompletions() {
            monaco.languages.register({ id: 'projectional' });

            // Completions are declare to monaco through this global array as a workaround, because the API is not yet exposed by blazorMonaco
            window.completionsArray = [];

            monaco.languages.registerCompletionItemProvider('projectional', {
                provideCompletionItems: function (model, position) {
                    return {
                        suggestions: globalThis.completionsArray
                    };
                }
            });
        }

        function setCompletionsArray(completions) {
            window.completionsArray = completions;
        }

        function getWebDriver() {
            return navigator.webdriver;
        }

    </script>
</body>

</html>
